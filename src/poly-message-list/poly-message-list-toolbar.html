<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="poly-message-list-toolbar">
  <template>

    <style>

      :host {
      }

      .container {
        font-size: 13px;
        background: white; 
        display: flex; 
        flex-direction: row; 
        width: 100%; 
        padding: 3px 0 4px;
        border-bottom: 1px solid #d0d0d0;
      }

      .divider {
        width: 1px; 
        height: 100%; 
        background-color: #dddddd; 
      }

      .message-actions {
        margin-left: 10px; 
        flex: 2; 
        display: flex; 
        flex-direction: row; 
        align-items: center;
      }

      .tools {
        margin-right: 10px; 
        flex: 2; 
        display: flex; 
        flex-direction: row; 
        align-items: center; 
        justify-content: flex-end;
      }

      paper-button {
        color: rgb(0, 188, 212);
      }

      iron-icon {
        margin: 0;
      }

      paper-button[disabled] {
        color: #cacaca;
        background: none;
      }

      paper-checkbox {
        --paper-checkbox-checked-color: rgb(0, 188, 212); 
        --paper-checkbox-checked-ink-color: rgb(0, 188, 212); 
        --paper-checkbox-ink-size: 40px;
        margin-bottom: 1px;
      }

      paper-icon-button {
        color: rgb(0, 188, 212); 
      }

      paper-menu-button {
        padding: 0;
      }

    </style>

    <div class="container">
      <div class="message-actions">
        <paper-button disabled="[[!hasSelection]]">
          <iron-icon icon="delete" style="margin-right: 5px;"></iron-icon>
          Delete
        </paper-button>
        <template is="dom-if" if="[[incoming]]">
          <paper-button disabled="[[!hasSelection]]">
            <iron-icon icon="star" style="margin-right: 5px;"></iron-icon>
            Star
          </paper-button>
          <paper-button disabled="[[!hasSelection]]">
            <iron-icon icon="star-border" style="margin-right: 5px;"></iron-icon>
            Unstar
          </paper-button>
          <div class="divider" style="margin-left: 20px;"></div>
          <paper-checkbox checked="" style="margin-left: 20px;">Only show starred</paper-checkbox>
        </template>
      </div>
      <div class="tools">
        <div style="margin: 0 10px;">
          <template is="dom-if" if="[[!hasSelection]]">
            <span style="color: #cacaca;">No messages selected</span>
          </template>
          <template is="dom-if" if="[[hasSelection]]">
            <b>[[selectionSize]]</b> [[_selectionText(selectionSize)]] 
          </template>
        </div>
        <paper-button on-tap="handleSelectAll">
          <iron-icon icon="check" style="margin-right: 5px;"></iron-icon>
          Select all
        </paper-button>
        <paper-button disabled="[[!hasSelection]]" on-tap="handleUnselectAll">
          <iron-icon icon="check-box-outline-blank" style="margin-right: 5px;"></iron-icon>
          Unselect all
        </paper-button>
        <template is="dom-if" if="[[incoming]]">
          <div class="divider" style="margin-left: 10px;"></div>
          <paper-icon-button 
            style   = "margin-left: 7px;"
            active  = "{{gridMode}}"
            toggles = "true"
            icon    = "[[_gridButtonIcon(gridMode)]]">
          </paper-icon-button>
        </template>
      </div>
    </div>

  </template>

  <script>
    Polymer({

      is: 'poly-message-list-toolbar',

      properties: {
        hasSelection: {
          type: Boolean,
        },
        selectionSize: {
          type: Number,
          value: 0,
        },
        gridMode: {
          type: Boolean,
          notify: true,
        },
        incoming: {
          type: Boolean,
          value: false,
        },
      },

      _gridButtonIcon: function(gridMode) {
        return gridMode ? 'view-module' : 'view-list'; 
      },

      _selectionText: function(size) {
        if (1 == size) {
          return ' message selected';
        } else {
          return ' messages selected';
        }
      },

      handleSelectAll: function() {
        this.fire('select-all');
      },

      handleUnselectAll: function() {
        this.fire('unselect-all');
      },

    });
  </script>
</dom-module>

