<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-badge/paper-badge.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/paper-tooltip/paper-tooltip.html">
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../poly-tab/poly-tab.html">
<link rel="import" href="../state-container.html">

<dom-module id="poly-header">
  <template>

    <style>

      :host {}

      app-toolbar {
        background-color: #1a88ae;
        color: white;
        font-weight: lighter;
        --app-toolbar-font-size: 24px;
        height: 45px;
      }

      paper-tabs {
        background-color: rgb(0, 188, 212); 
        color: #fff;
        width: 100vw;
        height: 68px;
        --paper-tabs-selection-bar-color: var(--paper-pink-a200); 
      }

      paper-tab {
        --paper-tab-ink: rgba(255, 255, 255, 0.7);
      }

      paper-badge {
        --paper-badge-margin-left: 30px;
        --paper-badge-margin-bottom: 40px;
      }

    </style>

    <iron-iconset-svg name="poly" size="24">
      <svg>
        <defs>
          <g id="outbox">
            <path fill="#ffffff" d="M14,14H10V11H8L12,7L16,11H14V14M16,11M5,15V5H19V15H15A3,3 0 0,1 12,18A3,3 0 0,1 9,15H5M19,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3" />
          </g>
        </defs>
      </svg>
    </iron-iconset-svg>

    <app-toolbar>
      <div main-title>
        <!-- http://fontmeme.com/fonts/young-frankenstein-font/ 28 -->
        <img src="/images/voxbox.png" style="margin-top: -6px;" />
      </div>

      <template is="dom-if" if="[[!online]]">
        <iron-icon id="offline-indicator" icon="warning"></iron-icon>
      </template>

      <paper-icon-button id="settings" on-tap="handleTap" icon="settings"></paper-icon-button>
      <paper-tooltip for="offline-indicator" offset="0">
        No connection
      </paper-tooltip>
    </app-toolbar>

    <paper-tabs selected="{{selected}}">
      <paper-tab>
        <poly-tab label="MIXER" icon="av:volume-up"></poly-tab>
      </paper-tab>
      <paper-tab>
        <poly-tab label="SMS INBOX" icon="move-to-inbox"></poly-tab>
        <template is="dom-if" if="[[_hasUnread(unread)]]">
          <paper-badge for="number" label="[[unread]]"></paper-badge>
        </template>
      </paper-tab>
      <paper-tab>
        <poly-tab label="SENT SMS" icon="poly:outbox"></poly-tab>
      </paper-tab>
      <!--
      <paper-tab>
        <poly-tab label="CALL HISTORY" icon="history"></poly-tab>
      </paper-tab>
      <paper-tab>
        <poly-tab label="CONTACTS" icon="communication:import-contacts"></poly-tab>
      </paper-tab>
      -->
    </paper-tabs>

  </template>

  <script>
    Polymer({

      is: 'poly-header',

      handleTap: function(event) {
        this.fire('tap-settings');
      },

      properties: {
        selected: {
          type: Number,
          value: 0,
          notify: true,
        },
        online: {
          type: Boolean,
          value: true,
        },
        unread: {
          type: Number,
          statePath: 'state.messages.unread',
        },
      },

      _hasUnread: function(unread) {
        return unread > 0;
      },

      behaviors: [
        ReceiverBehavior,
      ],

    });
  </script>
</dom-module>
