<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-item/paper-item-body.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="poly-message-item">
  <template>

    <style include="iron-flex"></style>

    <style>

      :host {
      }

      paper-material {
        height: 220px;
        margin: 10px;
        background: white;
        padding: 0 12px;
      }

      paper-item-body {
        justify-content: initial;
        padding: 12px 12px 12px 0;
      }

      paper-checkbox {
        padding: 21px 10px;
        --paper-checkbox-checked-color: rgb(0, 188, 212); 
        --paper-checkbox-checked-ink-color: rgb(0, 188, 212); 
      }

      .item {
        @apply(--layout-vertical);
      }

      .meta {
        @apply(--layout-horizontal);
        align-items: top;
      }

      .date {
        text-transform: uppercase;
      }

      .date > span {
        font-size: 13px;
      }

      .star {
        color: var(--paper-pink-a200); 
      }

      .content {
        min-height: 100px; 
        padding: 0;
      }

      .controls {
        align-self: flex-end;
        @apply(--layout-horizontal);
      }

    </style>

    <paper-material>
      <div class="item">

        <div class="meta">
          <paper-checkbox on-tap="toggleSelected" checked="[[selected]]"></paper-checkbox>
          <paper-item-body>
            <div secondary class="date"><span>[[formatDate(item.timestamp)]]</span></div>
            <div>[[item.endpoint]]</div>
          </paper-item-body>
        </div>

        <paper-item-body class="content">
          <div secondary style="white-space: normal;">
            [[item.content]]
          </div>
        </paper-item-body>

        <div class="controls">
          <paper-icon-button 
            icon   = "star"
            class  = "star">
          </paper-icon-button>
          <paper-icon-button 
            icon   = "more-vert">
          </paper-icon-button>

        </div>
        
      </div>
    </paper-material>

  </template>

  <script>
    Polymer({

      is: 'poly-message-item',

      formatDate(stamp) {
        return moment(Number(stamp)).format("ddd, MMM Do YYYY, h:mm:ss a"); 
      },

      toggleSelected(event) {
        this.fire('toggle-selected');
      },

      properties: {
        selected: {
          type: Boolean,
          value: false
        }
      }

    });
  </script>
</dom-module>
